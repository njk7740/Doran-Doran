<html layout:decorate="~{layout}">
<div layout:fragment="content" class="my-3 container-fluid">
    <div>
        <input class="title form-control border-0 mb-3" style="font-size:3rem;" th:value="${subject}"
               placeholder="제목을 입력해주세요" type="text">
        <div id="editor"></div>
        <div class="d-flex justify-content-between align-items-start my-2">
            <a th:href="@{/post/list}" class="btn btn-outline-secondary">뒤로가기</a>
            <button type="button" class="postCreateBtn btn btn-outline-primary btn-lg" onclick="submit()">등록</button>
        </div>
        <form method="post" id="postForm">
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
            <input type="hidden" id="subject" name="subject">
            <input type="hidden" id="content" name="content" th:value="${content}">
        </form>
    </div>
</div>
<script layout:fragment="script">
    const editor = new toastui.Editor({
        el: document.querySelector('#editor'),
        previewStyle: 'vertical',
        height: '700px',
        initialValue: document.querySelector("#content").value,
        initialEditType: 'wysiwyg',
        hideModeSwitch: true,

    });

    function submit() {
        document.querySelector("#subject").value = document.querySelector(".title").value;
        document.querySelector("#content").value = editor.getHTML();
        if (document.querySelector("#subject").value == "") alert("제목을 입력해주세요");
        else if (document.querySelector("#content").value == "") alert("내용을 입력해주세요");
        else document.querySelector("#postForm").submit();
    }

</script>
</html>